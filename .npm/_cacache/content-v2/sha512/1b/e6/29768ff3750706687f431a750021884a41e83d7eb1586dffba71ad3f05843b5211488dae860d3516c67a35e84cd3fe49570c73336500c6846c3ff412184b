{"_id":"micro-ftch","_rev":"5-9ba0d7de830718178c3d0a5a25aa6bb1","name":"micro-ftch","description":"Wrappers for built-in fetch() enabling killswitch, logging, concurrency limit and other features","dist-tags":{"latest":"0.4.0"},"versions":{"0.1.1":{"name":"micro-ftch","version":"0.1.1","keywords":["fetch","http","https","node","browser","ajax","request"],"author":{"url":"https://paulmillr.com","name":"Paul Miller"},"license":"MIT","_id":"micro-ftch@0.1.1","maintainers":[{"name":"paulmillr","email":"paul@paulmillr.com"}],"dist":{"shasum":"99c560aaba661ed882fe0b1039391b69791e4da6","tarball":"https://registry.npmjs.org/micro-ftch/-/micro-ftch-0.1.1.tgz","fileCount":5,"integrity":"sha512-Jcq7ZwSgzwnLGN8hHNgEcJQ3oFr976+efmQ9BMwsbxeGFGWd6t6LFrzT8YlpNftjajVmmwtqbR/u8Yjkuwo15A==","signatures":[{"sig":"MEQCIFhwV7Rk/IWNnFk3aHQFdYebHEEDVpkvT4Hj+z9es9E5AiAUqsuN/+qs+gcONU+8WPzZX1zYYJAwOzc8c8QPaHF8rQ==","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":5255,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJe80GUCRA9TVsSAnZWagAAU3EP/RbMzcfdiKhge73MGwrf\nGP790zm5XEwyxz1bX7CthB3gExMf4NNeGKuQ3ElIHd7msWH65ueDS4/jldcE\n9GqVR2ZBPsv3M1WvzSUC0u6hUqgQQtW+FMmHHatbx1Wa6baLtFFh5SQyJsxD\nzDJARCJM98kcL90cjWw75zd7Kav4Xz0d7iIAKv6kFVGoUYUaVvYvCKQUrJa6\nGwB00BoEg/hBXDBBQuvIy+Ya1tB4h78VZe5rEBdf8NgZ2lbGXrYAQPCCRTkk\nyiUGI6QZtdt9RGNm5PbLB8UBqUvewNU1AU38wAI2VXBVsrFOee+/9C6R+ia6\nwm5O0GhfMovSLLEQf4zo147zjyGtbePYj27ZzMPogD5/oi5pZ2C00OtLLDiN\nk8IzEsI8/dr8ArbA9P6IHSqZpRh0iClWHqWjCnYBSdJON2CyagYTfqEVMObY\nyy/ceCZbklHadpkjcsOgrvjG5YdNqWpOCZ5blZMCBhm3olzezBQ2sTsMfl5r\n6eeAyenJwYdykEo22Xur+rgenBDlWn3NQjjNOXvNVHYQtTBav01fv+5g/7Fr\nifraeCJd856FieBqH1hX/PUnpSRO7Y4rIlA6KCTxlmhe3KW+xGUAjndhd2dX\nPWFZnrssjsNMXJl0n9S/3YuGMYj8C6ErCwHRdPhfL4+zc2KUUjsY00nRAWk9\nbQLA\r\n=HWs9\r\n-----END PGP SIGNATURE-----\r\n"},"main":"index.js","gitHead":"9bc2694d1329a62142805961afd210be738e4a15","scripts":{"test":"echo \"Error: no test specified\" && exit 1","build":"tsc -d"},"_npmUser":{"name":"paulmillr","email":"paul@paulmillr.com"},"_npmVersion":"6.14.5","description":"Wraps nodejs built-in modules and browser fetch into one function.","directories":{},"_nodeVersion":"14.2.0","_hasShrinkwrap":false,"devDependencies":{"typescript":"^3.9.5","@types/node":"^14.0.14"},"_npmOperationalInternal":{"tmp":"tmp/micro-ftch_0.1.1_1593000340430_0.7967527946119359","host":"s3://npm-registry-packages"}},"0.2.0":{"name":"micro-ftch","version":"0.2.0","keywords":["fetch","http","https","node","browser","ajax","request"],"author":{"url":"https://paulmillr.com","name":"Paul Miller"},"license":"MIT","_id":"micro-ftch@0.2.0","maintainers":[{"name":"paulmillr","email":"paul@paulmillr.com"}],"dist":{"shasum":"67b2a4138c066328ed8765c2adf5f84b93e8b85d","tarball":"https://registry.npmjs.org/micro-ftch/-/micro-ftch-0.2.0.tgz","fileCount":5,"integrity":"sha512-WEWd4lYSlKNwqaOla9MP8XG/F78wW3m4fXdyOQUKrNKIhG4LF0Z2JBbJdwVTO3+xOdO5LcOmXV3t1aPnjs28UQ==","signatures":[{"sig":"MEUCIDYxp5BZhKo41kf2f0GQLVe8GTSKURjPc1ygkEUXSd2TAiEA6a6SUNCRG4nY/JmiJxq29+4aIkEfbpm21R3R+kUbzoo=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":8147,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJguukuCRA9TVsSAnZWagAAYiYQAIsE0zCLnx7aCNR4hxeo\nHC5Z77HhT1uOEEdH3zbSs3Aw6jPa+l3rVyqY6cOjrKsaao7YbFTiQMGKLzFQ\nedo64iX553LnhbmVuTdJg9ztNJu/0Nk8FnE49DK7NFGuTUxFRRQx0QMTWuZW\nn9qZujfxel5Zu6a55X4oxgfKiSC3XvT/vHc7Gm6X3GTyLD6I1JaUgFnGbzZw\nc+Ue5oX45FqbQRx5yQ8WnXU/pwonMYixBV5d3kw+1pItph8ndp6GBVPn9WWy\nDjDLw5AswzXK0X7sJgYPCFDo/PvklS1XWfeAE2kY6jckGpXuSQsBcDvKf0BH\nyFIsCJxI5BOCgAqBY5R6xciA6iVdgvrLQCT19CBmG1bkmlvEn4mq1igeoME0\nvyOz5HqUk9sjd4P0i3WlvfF73DgoM0RAtcVDOhZZprpJJZHoKMBKD+97oyPD\nbQuRmeXY294pDpS2EZl4dBPc6Fw3xCOZiL0jr70HUMwiriNLZQNG7nDQBT/H\nkytOXjhSc55HNDz/UVAKeagmlxIpkaxGlocIG6Fopn77b/Vr8J/G0WTx0eoY\nzqsEoVy663ykuhuyO6Fl773zwbx5ah3vC9mA99hjekGHzrosbkeP0iK0IAK+\n9FZZi/sVAFGKUT2gsUkQqqJsGfoB/JUUUHmGfDJyRjCryzyNEuBJN7VPqJ+Q\nQVko\r\n=MXo4\r\n-----END PGP SIGNATURE-----\r\n"},"main":"index.js","gitHead":"5d11ff5b010948050685c95729d8deaff04c27e0","scripts":{"test":"node test/node.js","bench":"node test/bench.js","build":"tsc -d"},"_npmUser":{"name":"paulmillr","email":"paul@paulmillr.com"},"_npmVersion":"7.16.0","description":"Wraps nodejs built-in modules and browser fetch into one function.","directories":{},"_nodeVersion":"16.2.0","_hasShrinkwrap":false,"devDependencies":{"typescript":"^4.3.2","@types/node":"^14.0.14"},"_npmOperationalInternal":{"tmp":"tmp/micro-ftch_0.2.0_1622862126073_0.0019365359258167736","host":"s3://npm-registry-packages"}},"0.3.0":{"name":"micro-ftch","version":"0.3.0","keywords":["fetch","http","https","node","browser","ajax","request"],"author":{"url":"https://paulmillr.com","name":"Paul Miller"},"license":"MIT","_id":"micro-ftch@0.3.0","maintainers":[{"name":"paulmillr","email":"paul@paulmillr.com"}],"dist":{"shasum":"67364fc190c494fe211b1b59d5b0852c1bfa6aa3","tarball":"https://registry.npmjs.org/micro-ftch/-/micro-ftch-0.3.0.tgz","fileCount":5,"integrity":"sha512-NWeRAy2BzMHdB6w63UG2xZVvj4WTJAkyJhI/LQB6ZZZQbJ0wbMA3djpVGO8GG8r0+oo0vOYWNgvhjRkobireuA==","signatures":[{"sig":"MEUCIEFn5UANNBAXsWoNlOT8XT6X7N2cPnlbjWQVuJFbl/+mAiEA2rZT1waChIbNmcTQN4uClCrl3PReWkH5JL8WGJ7+SXs=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":11639,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJg4+K3CRA9TVsSAnZWagAAEVsP/jPEvBlyo+uI7zDOtnfw\nxHIGrj3CrsP24AV1kop26HS6V03sKPY21U/sq1GsGlYEV/w6GYRw/heo0NI4\nN7DMI0FjmbSVeoQ8Tyh1w5vePq3w/lpYelYMOrzwKvDah3lFOWqb9clBCSkh\nErFjOx7Kw9zfh6M+hpzUsCpMm2qTKDdNPOsGNRBycwtL6lWk4DcY0d9saRv1\nZGXRnDHYcI+6/lH45mhU0MuwZskqK+aSkpT9lRJmX2aNgeNNCC7FKTThtCzP\nriy4JPJr5o8+REby+IIFip7dZRLtYhEOy4MJNN6Cb1zMEujgAjM3HJpMcNvy\nPEHQsvXnEuyXP/WG5SL2s4THHxUQ8Tr3PYx/wojrBAt5xbvb9Mla/et8QRkp\nprEuwgvjk1j4z99Zy2zZXA6dVq4kxfn03rnvi08s0NS17F+zDjOcyPwgbHVM\n+otox3N7soJMOoec065+vRk3Ibashf4IZkBTkgpoaPc18jS2Z+dJONApG/p4\nki393NjD6ZUYlTJuneUyYcoF1MTyU28qihzc5GuZBWtnSGiMlC9p04y1c/XB\n2oZtdOO8vA+NF5UJXw1cC1COZvbSrogpEklQK1SjIYd8pwr1ASXB4W/UK5pa\n7Ysvp/NhSjCsrIukFoZt7Fb/UQEkNwfBBeuPdVjAqNbEEKRjnnOVllrAvYmM\nFkJi\r\n=NhqM\r\n-----END PGP SIGNATURE-----\r\n"},"main":"index.js","gitHead":"9f6e2055b076117ef4432e481262b5bbee10a907","scripts":{"test":"node test/node.js","bench":"node test/bench.js","build":"tsc -d"},"_npmUser":{"name":"paulmillr","email":"paul@paulmillr.com"},"_npmVersion":"7.16.0","description":"Wraps nodejs built-in modules and browser fetch into one function.","directories":{},"_nodeVersion":"16.2.0","_hasShrinkwrap":false,"devDependencies":{"typescript":"^4.3.5","@types/node":"^16.0"},"_npmOperationalInternal":{"tmp":"tmp/micro-ftch_0.3.0_1625547447368_0.9509188418192105","host":"s3://npm-registry-packages"}},"0.3.1":{"name":"micro-ftch","version":"0.3.1","keywords":["fetch","http","https","node","browser","ajax","request"],"author":{"url":"https://paulmillr.com","name":"Paul Miller"},"license":"MIT","_id":"micro-ftch@0.3.1","maintainers":[{"name":"paulmillr","email":"paul@paulmillr.com"}],"dist":{"shasum":"6cb83388de4c1f279a034fb0cf96dfc050853c5f","tarball":"https://registry.npmjs.org/micro-ftch/-/micro-ftch-0.3.1.tgz","fileCount":5,"integrity":"sha512-/0LLxhzP0tfiR5hcQebtudP56gUurs2CLkGarnCiB/OqEyUFQ6U3paQi/tgLv0hBJYt2rnr9MNpxz4fiiugstg==","signatures":[{"sig":"MEUCIQCAcz+IOPSFb8lIwdtAsDHJZOSxZGJA/KQcbg4tfxR1NwIgdA1zZo/6+ZM3nn6sR04b9zhGAzJE3IOGPWVqFmf7yyU=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":12002,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJg5nrSCRA9TVsSAnZWagAAOWwP/intb/wayfgJa+laMi3O\nGbAn6xfYq12TVWwsLoe1tfNU+HFndmb8/rCp/hIPepGbNh2Cu4A36p9gnyfc\njsNHE8UF30siPQGnfLPEfzu5SZkT9uejzOmPq9mw3Yvd0yuf/sMvkW0Da+S/\nMS0LcsHoK3Robbk5lPYZZFa/DeKFLok3XH5pruC6p40OgSF8+xpgZgARYU3H\nz63GG8uJqBSaJBLLcsW9yd/zAd7twLImEFj+ETZV4O6ZHTTxrOCg5zLW0LyV\nmpfj/SsyDGi3qO0QbyuyOID/0crMxWoitbAKSsDQ2bGw329cnK+nGSv2uxLM\nZWfHHF8SvfDvcjw1ciT87mGIN037yH1GusspppPbWEourpXxNLSPCh0IMfFu\nhfObFdcX/sNIqPn9SAJEFsNbxjx1jrX1Ilkcj80VQEWXRGqwoAQG5t7XEjUh\nocB5bYZyI8F3MEZvEr7lSq1VQpKS2ktDtgzegRVe6H1cntzmwXbCVuhAPaHn\nT8V1XoDlEKPWHx0kaAUELg2aaTYq1Ey1Q7hremdPr8oFz6OHO1AbrUmiMpL7\n25G8G2CJs5WZrMUvVhydkyPPw/51jKzhW3UNi2jBddVcksSAzjVdsSZXa0/O\nJbCJ5Bsg20Yn50InyKufVbuViavymlSNDn6J2IZAm/f2r+nMvslDjHAJSUud\nF5/9\r\n=WEbg\r\n-----END PGP SIGNATURE-----\r\n"},"main":"index.js","gitHead":"d1e98faea55fd71b8e97353f673c1d1be6ead518","scripts":{"test":"node test/node.js","bench":"node test/bench.js","build":"tsc -d"},"_npmUser":{"name":"paulmillr","email":"paul@paulmillr.com"},"_npmVersion":"7.16.0","description":"Wraps nodejs built-in modules and browser fetch into one function.","directories":{},"_nodeVersion":"16.2.0","_hasShrinkwrap":false,"devDependencies":{"typescript":"^4.3.5","@types/node":"^16.0"},"_npmOperationalInternal":{"tmp":"tmp/micro-ftch_0.3.1_1625717457785_0.1708303544158265","host":"s3://npm-registry-packages"}},"0.4.0":{"name":"micro-ftch","version":"0.4.0","description":"Wrappers for built-in fetch() enabling killswitch, logging, concurrency limit and other features","main":"lib/index.js","module":"lib/esm/index.js","types":"lib/index.d.ts","exports":{".":{"types":"./lib/index.d.ts","import":"./lib/esm/index.js","default":"./lib/index.js"}},"devDependencies":{"@paulmillr/jsbt":"0.1.0","micro-should":"0.4.0","prettier":"3.1.1","typescript":"5.3.2"},"author":{"name":"Paul Miller","url":"https://paulmillr.com"},"license":"MIT","homepage":"https://github.com/paulmillr/micro-ftch","repository":{"type":"git","url":"git+https://github.com/paulmillr/micro-ftch.git"},"scripts":{"build":"tsc && tsc -p tsconfig.esm.json","lint":"prettier --check index.ts","format":"prettier --write index.ts","test":"node test/index.test.js"},"keywords":["fetch","network","killswitch","concurrent","parallel","jsonrpc","replay","ftch"],"funding":"https://paulmillr.com/funding/","_id":"micro-ftch@0.4.0","gitHead":"e65b884fcb7dfe8bd58ce3a78a93c70bf57bd054","bugs":{"url":"https://github.com/paulmillr/micro-ftch/issues"},"_nodeVersion":"20.14.0","_npmVersion":"10.8.1","dist":{"integrity":"sha512-1SEH+syTsMQMQByZGJeMAiBxJIRu/3gG1z1+tHexgtXtXgwQy1C5JVBtXRdMZOIx9flerUBCJtmtVl7szwWgxQ==","shasum":"b2c5320b5db934dcb9678eaa5461c24e992d97d6","tarball":"https://registry.npmjs.org/micro-ftch/-/micro-ftch-0.4.0.tgz","fileCount":11,"unpackedSize":73266,"attestations":{"url":"https://registry.npmjs.org/-/npm/v1/attestations/micro-ftch@0.4.0","provenance":{"predicateType":"https://slsa.dev/provenance/v1"}},"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCJ5V7+kMAo2AoDUC4jEMUX1POW7kcYsfVsOlAPZbqwSQIgbVYnDA/Lsti5ei0fefKpNQbdQbhZazpL4iPsbMPErZI="}]},"_npmUser":{"name":"paulmillr","email":"paul@paulmillr.com"},"directories":{},"maintainers":[{"name":"paulmillr","email":"paul@paulmillr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/micro-ftch_0.4.0_1718504046342_0.15267972369511895"},"_hasShrinkwrap":false}},"time":{"created":"2020-06-24T12:05:40.429Z","modified":"2024-06-16T02:14:06.959Z","0.1.1":"2020-06-24T12:05:40.544Z","0.2.0":"2021-06-05T03:02:06.247Z","0.3.0":"2021-07-06T04:57:27.477Z","0.3.1":"2021-07-08T04:10:57.976Z","0.4.0":"2024-06-16T02:14:06.521Z"},"maintainers":[{"name":"paulmillr","email":"paul@paulmillr.com"}],"author":{"name":"Paul Miller","url":"https://paulmillr.com"},"keywords":["fetch","network","killswitch","concurrent","parallel","jsonrpc","replay","ftch"],"license":"MIT","readme":"# micro-ftch\n\nWrappers for [built-in fetch()](https://developer.mozilla.org/en-US/docs/Web/API/fetch) enabling killswitch, logging, concurrency limit and other features.\n\nfetch is great, however, its usage in secure environments is complicated. The library makes it simple.\n\n## Usage\n\nA standalone file\n[micro-ftch.js](https://github.com/paulmillr/micro-ftch/releases) is also available.\n\n> npm install micro-ftch\n\nThere are three wrappers over `fetch()`:\n\n1. `ftch(fetch)` - killswitch, logging, timeouts, concurrency limits, basic auth\n2. `jsonrpc(fetch)` - batched JSON-RPC functionality\n3. `replayable(fetch)` - log & replay network requests without actually calling network code.\n\n```ts\nimport { ftch, jsonrpc, replayable } from 'micro-ftch';\n```\n\n- [Killswitch: instantly enable and disable network](#killswitch-instantly-enable-and-disable-network)\n- [Logging](#logging)\n- [Timeouts](#timeouts)\n- [Concurrency limit](#concurrency-limit)\n- [Basic auth](#basic-auth)\n- [jsonrpc](#jsonrpc)\n- [replayable](#replayable)\n- [Privacy](#privacy)\n- [License](#license)\n\n### Killswitch: instantly enable and disable network\n\nWhen kill-switch is enabled, all requests will throw an error.\nYou can dynamically enable and disable it any any time.\n\n```ts\nlet ENABLED = true;\nconst f = ftch(fetch, { killswitch: () => ENABLED });\nf('http://localhost'); // ok\nENABLED = false;\nf('http://localhost'); // throws\nENABLED = true;\nf('http://localhost'); // ok\n```\n\n### Logging\n\n```ts\nconst f = ftch(fetch, { log: (url, opts) => console.log('fetching', url, opts) });\nf('http://url/'); // will print request information\n```\n\n### Timeouts\n\n```ts\n// browser and OS may have additional timeouts, we cannot override them\n// a: per-request timeout\nconst f = ftch(fetch);\nconst res = await f('http://url/', { timeout: 1000 }); // throws if request takes more than one second\n\n// b: timeout for all\nconst f = ftch(fetch, { timeout: 1000 });\nconst res = await f('http://url/'); // throws if request takes more than one second\n```\n\n### Concurrency limit\n\nAllows to not accidentally hit rate limits or do DoS.\n\n```ts\n// browser and OS may have additional limits, we cannot override them\nconst f = ftch(fetch, { concurrencyLimit: 1 });\nconst res = await Promise.all([f('http://url1/'), f('http://url2/')]); // these would be processed sequentially\n```\n\n### Basic auth\n\n```ts\nconst f = ftch(fetch);\nconst res = await f('https://user:pwd@httpbin.org/basic-auth/user/pwd'); // supports basic auth!\n```\n\n### jsonrpc\n\nSupports batching multiple HTTP requests into one \"Batched\" JSON RPC HTTP request. Can massively speed-up when servers are single-threaded, has small per-user limits\n\n```ts\nconst rpc = jsonrpc(fetch, 'http://rpc_node/', {\n  headers: {},\n  batchSize: 20,\n});\nconst res = await rpc.call('method', 'arg0', 'arg1');\nconst res2 = await rpc.callNamed('method', { arg0: '0', arg1: '1' }); // named arguments\n```\n\n### replayable\n\nSmall utility to log & replay network requests in tests, without actually calling network code.\n\n```ts\nconst ftch = ftch(fetch);\nconst replayCapture = replayable(ftch); // wraps fetch\nawait replayCapture('http://url/1'); // real network\nawait replayCapture('http://url/2');\nconst logs = replayCapture.export(); // Exports logs\n\n// When logs provided - use cached version (faster)\nconst replayTest = replayable(ftch, JSON.parse(logs));\nawait replayTest('http://url/1'); // cached\nawait replayTest('http://url/2'); // cached\nawait replayTest('http://url/3'); // real network\n\n// When done and everything is captured, turn on 'offline' mode to throw on network requests:\nconst replayTestOffline = replayable(ftch, JSON.parse(logs), {\n  offline: true,\n});\nawait replayTest('http://url/1'); // cached\nawait replayTest('http://url/2'); // cached\nawait replayTest('http://url/3'); // throws!\n```\n\n## Privacy\n\nftch() disables referrer by default by setting `referrerPolicy: 'no-referrer'`.\n\n## License\n\nMIT (c) Paul Miller [(https://paulmillr.com)](https://paulmillr.com), see LICENSE file.\n","readmeFilename":"README.md","homepage":"https://github.com/paulmillr/micro-ftch","repository":{"type":"git","url":"git+https://github.com/paulmillr/micro-ftch.git"},"bugs":{"url":"https://github.com/paulmillr/micro-ftch/issues"}}